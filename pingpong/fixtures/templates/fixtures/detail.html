<html>
<head>
<style>
</style>
</head>

<body>
  <strong>{{ league.league_name }}</strong>
  <a href="{% url 'league:index' %}">戻る</a>
  <table border="1">
    <tr><th></th>
      {% for p in players %}
      <th>{{ p.p_name }}</th>
      {% endfor %}
      <th>勝ち</th><th>負け</th><th>順位</th>
    </tr>
    <tbody>
      {% for rp in players %} <!-- row player -->
      <tr>
        <th>{{ rp.p_name }}</th>
        {% for cp in players %}  <!-- column player -->
        {% if rp.p_name == cp.p_name %}
        <td style="background-color:black"></td>
        {% else %}
        <td>
          <table rules="cols" width="100px" height="100px">
            <tr align="center">
              {% for item in mixedls %}
              {% with A=item.0.0.0 B=item.0.1.0 Aset=item.0.0.1 Bset=item.0.1.1 %}
              {% with Agains=item.1.0 Bgains=item.1.1 ABgains=item.1 isAwin=item.2 %}]
              
              {% if A == rp and B == cp %}
              {% if isAwin and Aset >= 3 or isAwin and Bset >= 3 %}
              <td colspan=5 style="background-color:yellow;">{{ Aset }}</td>
              <td style="background-color:yellow;">
                {% else %}
                <td colspan=5>{{ Aset }}</td>
                <td>
                  {% endif %}
                  {% for ag in Agains %}{% for bg in Bgains %}
                  {% if forloop.counter0 == forloop.parentloop.counter0 %}
                  <span class="gamecell">{{ ag }} - {{ bg }}</span> <br>
                  {% endif %}
                  {% endfor %}{% endfor %}
                </td>
                {% if isAwin and Aset >= 3 or isAwin and Bset >= 3 %}
                <td colspan=5 style="background-color:yellow;">{{ Bset }}</td>
                {% else %}
                <td colspan=5>{{ Bset }}</td>
                {% endif %}

                {% elif A == cp and B == rp %}
                {% if not isAwin and Aset >= 3 or not isAwin and Bset >= 3%}
                <td colspan=5 style="background-color:yellow;">{{ Bset }}</td>
                <td style="background-color:yellow;">
                  {% else %}
                  <td colspan=5>{{ Bset }}</td>
                  <td>
                    {% endif %}
                    {% for ag in Agains %}{% for bg in Bgains %}
                    {% if forloop.counter0 == forloop.parentloop.counter0 %}
                    <span class="gamecell">{{ bg }} - {{ ag }}</span> <br>
                    {% endif %}
                    {% endfor %}{% endfor %}
                  </td>
                  {% if not isAwin and Aset >= 3 or not isAwin and Bset >= 3%}
                  <td colspan=5 style="background-color:yellow;">{{ Aset }}</td>
                  {% else %}
                  <td colspan=5>{{ Aset }}</td>
                  {% endif %}

                  {% endif %}
                  {% endwith %}{% endwith %}
                  {% endfor %}
                </tr>
              </table>
            </td>
            {% endif %}
            {% endfor %}
            <td>{{ rp.win_num }}</td>
            <td>{{ rp.lose_num }}</td>
            <td>1</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </body>
    </html>
